<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Your Cart - B.F. Fashion</title>
  <link rel="stylesheet" href="demobagri.css">
  <style>
    form {
      margin-top: 40px;
      text-align: left;
      display: inline-block;
      background-color: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    input, textarea {
      width: 100%;
      padding: 8px;
      margin: 8px 0;
      border: 1px solid #ccc;
      border-radius: 5px;
    }
    button {
      background-color: maroon;
      color: white;
      border: none;
      padding: 10px 16px;
      border-radius: 8px;
      cursor: pointer;
    }
    button:hover {
      background-color: darkred;
    }
  </style>
</head>
<body>

  <!-- ===== HEADER ===== -->
  <header class="header">
    <div class="logo-left">
      <img src="logojmb.jpg" width="60" height="60">
    </div>

    <div class="title-center">
      <h1>Your Cart</h1>
    </div>

    <div class="cart-right">
      <a href="index.html" class="cart-btn">‚Üê Back to Shop</a>
    </div>
  </header>

  <!-- ===== CART ===== -->
  <main style="text-align:center; margin:40px;">
    <div id="cart-items"></div>
    <h2 id="total"></h2>

    <button id="clear-cart" class="add-to-cart">Clear Cart</button>

    <div id="order-section" style="display:none;">
      <h2>üßæ Place Your Order</h2>
      <form id="order-form">
        <label>Full Name:</label>
        <input type="text" id="name" required>

        <label>Phone Number:</label>
        <input type="tel" id="phone" required pattern="[0-9]{10}" maxlength="10">

        <label>Delivery Address:</label>
        <textarea id="address" rows="4"></textarea>

        <button type="submit">Place Order on WhatsApp</button>
      </form>
      <p id="success" style="color:green; font-weight:bold; margin-top:10px;"></p>
    </div>
  </main>

  <!-- ===== SCRIPT ===== -->
  <script>
    let cart = JSON.parse(localStorage.getItem("cart")) || [];
    const cartItemsDiv = document.getElementById("cart-items");
    const totalElement = document.getElementById("total");
    const orderSection = document.getElementById("order-section");

    function renderCart() {
      cartItemsDiv.innerHTML = "";
      if (cart.length === 0) {
        cartItemsDiv.innerHTML = "<h2>Your cart is empty üõí</h2>";
        totalElement.textContent = "";
        orderSection.style.display = "none";
        return;
      }

      let total = 0;
      cart.forEach((item, index) => {
        total += item.price;
        cartItemsDiv.innerHTML += `
          <div style="margin:10px; border:1px solid #ddd; padding:10px; border-radius:10px; display:inline-block;">
            <img src="${item.img}" width="100" height="100"><br>
            <b>${item.name}</b><br>‚Çπ${item.price}<br>
            <button onclick="removeItem(${index})" class="add-to-cart">Remove</button>
          </div>
        `;
      });

      totalElement.textContent = "Total: ‚Çπ" + total;
      orderSection.style.display = "block";
    }

    function removeItem(index) {
      cart.splice(index, 1);
      localStorage.setItem("cart", JSON.stringify(cart));
      renderCart();
    }

    document.getElementById("clear-cart").addEventListener("click", () => {
      localStorage.removeItem("cart");
      cart = [];
      renderCart();
    });

    // Handle Order Form + WhatsApp Send
    document.getElementById("order-form").addEventListener("submit", (e) => {
      e.preventDefault();
      const name = document.getElementById("name").value.trim();
      const phone = document.getElementById("phone").value.trim();
      const address = document.getElementById("address").value.trim();

      if (cart.length === 0) {
        alert("Your cart is empty!");
        return;
      }

      let message = `*üõçÔ∏è New Order *\n\n`;
      message += `*Customer:* ${name}\n`;
      message += `*Phone:* ${phone}\n`;
      message += `*Address:* ${address}\n\n`;
      message += `*Order Details:*\n`;

      let total = 0;
      cart.forEach((item) => {
        message += `- ${item.name} ‚Äî ‚Çπ${item.price}\n`;
        total += item.price;
      });

      message += `\n*Total:* ‚Çπ${total}\n\n`;

      // your WhatsApp number (include country code, no +)
      const whatsappNumber = "919316149804"; // ‚Üê change if needed
      const encodedMessage = encodeURIComponent(message);
      const whatsappURL = `https://wa.me/${whatsappNumber}?text=${encodedMessage}`;

      // Open WhatsApp
      window.open(whatsappURL, "_blank");

      // Clear cart after sending
      document.getElementById("success").textContent = "‚úÖ Order sent on WhatsApp!";
      localStorage.removeItem("cart");
      cart = [];
      renderCart();
    });

    renderCart();
  </script>
</body>
</html>
